# 과제 설명

## 개발 필수요건

1. 상품관리 (등록/ 수정/ 삭제) 기능을 구현하였습니다.
    - schemas 내 products 및 routes와 controllers의 product를 확인하시면 좋을 거 같습니다.

2. 주문관리
    - schemas 내 orders 및 routes와 controllers의 order를 확인하시면 좋을 거 같습니다.
    - 여러 상품들이 하나의 주문임을 알기 쉽게 하기 위해 배열(하나의 주문) 안에 여러 상품들을 담았습니다. 
    - 부분취소 기능 구현
      * 위에서 설명한 바와 같이 최초 주문 시 productName: [{name: "사과"}, {name: "바나나"}, ...] / productCount: [{count: 1}, {count: 2}, ...]  와 같이 DB에 저장이 되는데 부분취소 요청이 오는 경우 $set 연산자를 사용해 기존 배열의 첫번째 인덱스를 입력값의 첫번째 인덱스로 변경 후 for문과 $push연산자를 이용해 모든 인덱스 값을 입력값으로 변경합니다. 그 다음,  for문을 이용해 인덱스를 확인하다가 productCount 필드에서 0이 발견되면 $pull 연산자를 이용해 제거합니다.
      * controllers - order - 37~74 line을 확인하시면 좋을 거 같습니다.
    - 주문상태
      * 최초 주문 시 orderStatus 필드를 "주문접수"로 저장합니다.
      * 주문 취소 시 orderStatus 필드를 "주문취소"로 변경합니다.
    - 주문 및 취소 시 콘솔에 로그를 출력하도록 구현하였습니다.

## 개발 추가요건 (선택)

1. 인증/인가
    - 토큰을 기반으로 회원가입 / 로그인 기능을 구현하였습니다.
    - 미들웨어를 만들어 인가되지 않은 유저에 대해 상품관리 및 주문관리 기능을 제한하였습니다.

2. 예외처리
    - 회원가입 및 로그인 시 발생할 수 있는 여러 상황들에 각기 다른 응답값을 주었습니다.
    - 핸들링되지 않은 에러가 발생할 경우를 대비해 try-catch문을 통해 예외처리를 하였습니다.

3. 단위테스트
    - MVC 패턴으로 나눈 후 모킹하여 단위테스트를 수행하였습니다.

4. 활용가능한 기술 추가적용 가능
    - 유저가 아이디 또는 패스워드를 잊어버릴 경우를 대비하여 node-mailer 라이브러리를 이용해 아이디 또는 임시패스워드를 메일로 전송할 수 있도록 구현하였습니다.
    - CORS를 이용하여 검증되지 않은 사이트로부터의 요청을, express-rate-limit을 이용하여 DoS 공격을 방어하였습니다.
